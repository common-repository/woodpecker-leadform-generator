!function(e){"use strict";e(document).ready(function(){function n(n){return e(n).closest("form")}jQuery("input[name=woodpecker-connector-accept_policy]").on("click",function(){var e=n(this),o=jQuery(this),r=jQuery(e).find("div.woodpecker-connector-checkbox");r.hasClass("invalid")&&r.removeClass("invalid"),o.is(":checked")?o.val("1"):o.val("0")}),jQuery("div.woodpecker-connector-email").on("keyup",function(){var e=n(this);jQuery(e).find("div.woodpecker-connector-email").hasClass("invalid")&&(jQuery(this).removeClass("invalid"),jQuery(e).find(".woodpecker-connector-response-container").slideUp())}),jQuery(".woodpecker-connector-trigger").on("click",function(){event.preventDefault();var e=[],o=n(this);jQuery(o).find(".woodpecker-connector-response-container").slideUp().html(""),jQuery(o).find("input").each(function(){var n=jQuery(this).attr("name"),o=jQuery(this).val(),r={};r.name=n,r.val=o,e.push(r),jQuery(this).removeClass("woodpecker-connector-input-danger")});var r={action:"add_prospect_to_campaing",parameters:e},c=jQuery(this).data("ajaxurl"),i=jQuery(o).find(".woodpecker-connector-response-container");jQuery.post(c,r,function(e){if(0==e)i.html("Sorry no response");else{var n=jQuery.parseJSON(e),r=o.parents("div.woodpecker-connector-shortcode").find("input");"ERROR"==n.action?"POLICY"==n.code?(jQuery(o).find("div.woodpecker-connector-checkbox").addClass("invalid"),i.html('<div class="alert alert-danger woodpecker-connector-danger">'+n.message+"</div>").slideDown(),r.each(function(){jQuery(this).addClass("woodpecker-connector-input-danger")})):(jQuery(o).find("div.woodpecker-connector-email").addClass("invalid"),i.html('<div class="alert alert-danger woodpecker-connector-danger">'+n.message+"</div>").slideDown(),r.each(function(){jQuery(this).addClass("woodpecker-connector-input-danger")})):(n.action,i.html('<div class="alert alert-success woodpecker-connector-success">'+n.message+"</div>").slideDown(),r.each(function(){jQuery(this).val("")}))}}).done(function(){}).fail(function(){jQuery(o).find(".woodpecker-connector-response-container").html("Error")}).always(function(){})})})}(jQuery);